# å®Œæ•´æµç¨‹è¿è¡Œæ€»ç»“ / Pipeline Execution Summary

**æ—¥æœŸ**: 2025-11-14  
**çŠ¶æ€**: âœ… **æˆåŠŸè¿è¡Œ**

---

## âœ… è¿è¡Œç»“æœ

### æµ‹è¯•æ•°æ®ï¼š2024 å¹´ 1 æœˆ

**æ•°æ®è§„æ¨¡**:
- Tick æ•°æ®: 3,059,497 æ¡
- K çº¿æ•°æ®: 6,054 æ ¹ (5åˆ†é’Ÿ)
- æ•°æ®å¤§å°: 568.96 MB (å†…å­˜)
- æ—¶é—´èŒƒå›´: 2024-01-01 è‡³ 2024-01-31

**å¤„ç†æ—¶é—´**: çº¦ 15 ç§’

---

## ğŸ“Š åˆ†æç»“æœ

### 1. æ•°æ®åŠ è½½ âœ…

- âœ… æˆåŠŸåŠ è½½ 27 ä¸ª Parquet æ–‡ä»¶
- âœ… è‡ªåŠ¨é€‚é…åˆ—å (ts_utc â†’ timestamp, bid/ask â†’ price)
- âœ… æ—¶åŒºå¤„ç†æ­£ç¡® (UTC)

### 2. K çº¿èšåˆ âœ…

- âœ… èšåˆä¸º 6,054 æ ¹ 5åˆ†é’Ÿ K çº¿
- âœ… è®¡ç®— OHLCV
- âœ… æ·»åŠ æŠ€æœ¯æŒ‡æ ‡ (SMA, EMA, RSI, ç­‰)

### 3. å¼‚å¸¸æ£€æµ‹ âœ…

| å¼‚å¸¸ç±»å‹ | æ£€æµ‹æ•°é‡ | è¯´æ˜ |
|----------|----------|------|
| ä»·é‡å¼‚å¸¸ (PV) | 70 ä¸ª | z-score > 2 |
| æˆäº¤é‡çªå¢ (VS) | 255 ä¸ª | z-score > 2 |
| å¯¹æ•²è¡Œä¸º (WT) | 0 ä¸ª | ç¼ºå°‘ gross_volume/net_volume åˆ— |
| æç«¯ K çº¿ (EC) | 0 ä¸ª | ç¼ºå°‘ wick_ratio/body åˆ— |

**æ³¨æ„**: å¯¹æ•²å’Œæç«¯ K çº¿æ£€æµ‹éœ€è¦é¢å¤–çš„ç‰¹å¾åˆ—ï¼Œå½“å‰æ•°æ®ä¸­ä¸åŒ…å«è¿™äº›åˆ—ã€‚

### 4. ManipScore å› å­ âœ…

- âœ… æˆåŠŸè®¡ç®—æ“çºµåˆ†æ•°
- åˆ†æ•°èŒƒå›´: 0.0000 - 1.0000
- å¹³å‡åˆ†æ•°: 0.2614
- é«˜åˆ†æ—¶æ®µ (>0.7): 12 ä¸ª (0.20%)
- ä¸­åˆ†æ—¶æ®µ (0.5-0.7): 147 ä¸ª (2.43%)
- ä½åˆ†æ—¶æ®µ (<0.5): 5,894 ä¸ª (97.37%)

**æƒé‡é…ç½®**:
- ä»·é‡å¼‚å¸¸: 25%
- æˆäº¤é‡çªå¢: 25%
- ç»“æ„å¼‚å¸¸: 25%
- å¯¹æ•²æ£€æµ‹: 25%

### 5. ç­–ç•¥ä¿¡å·ç”Ÿæˆ âœ…

- ç­–ç•¥ç±»å‹: ç®€å•åŠ¨é‡ç­–ç•¥ (ä»·æ ¼çªç ´ 20 å‘¨æœŸå‡çº¿)
- åŸå§‹ä¿¡å·: 3,102 ä¸ª (51.24%)
- è¿‡æ»¤åä¿¡å·: 3,098 ä¸ª (51.17%)
- è¿‡æ»¤æ‰: 4 ä¸ªä¿¡å· (0.13%)

### 6. æ€§èƒ½å¯¹æ¯” âœ…

| æŒ‡æ ‡ | åŸå§‹ç­–ç•¥ | è¿‡æ»¤åç­–ç•¥ | æ”¹è¿› | æ”¹è¿›% |
|------|----------|------------|------|-------|
| æ€»æ”¶ç›Š | -0.1158 | -0.1171 | -0.0013 | +1.14% |
| Sharpe æ¯”ç‡ | -1.0262 | -1.0455 | -0.0193 | +1.88% |
| æœ€å¤§å›æ’¤ | -0.1227 | -0.1240 | -0.0013 | +1.06% |
| èƒœç‡ | 0.2565 | 0.2562 | -0.0003 | -0.13% |
| äº¤æ˜“æ¬¡æ•° | 701 | 703 | +2 | +0.29% |

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ¼”ç¤ºç­–ç•¥ï¼Œå®é™…è¡¨ç°å–å†³äºå…·ä½“çš„äº¤æ˜“ç­–ç•¥å’Œå‚æ•°è®¾ç½®ã€‚

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶

### ç»“æœæ–‡ä»¶

**æ–‡ä»¶**: `results/bars_with_manipscore_2024-01-01_2024-01-31.csv`  
**å¤§å°**: 1.37 MB  
**è¡Œæ•°**: 6,054 è¡Œ

**åŒ…å«åˆ—**:
- OHLCV æ•°æ® (open, high, low, close, volume)
- æŠ€æœ¯æŒ‡æ ‡ (sma_20, returns, rolling_vol, ç­‰)
- å¼‚å¸¸åˆ†æ•° (pv_anomaly, vol_spike, wash_index, extreme_candle)
- ManipScore å› å­ (manip_score)
- ç­–ç•¥ä¿¡å· (signal, filtered_signal)

---

## ğŸ” å…³é”®å‘ç°

### 1. æ•°æ®è´¨é‡

- âœ… æ•°æ®å®Œæ•´ï¼Œæ— ç¼ºå¤±å€¼
- âœ… æ—¶é—´åºåˆ—è¿ç»­
- âš ï¸ æˆäº¤é‡å›ºå®šä¸º 2.0 (å¯èƒ½æ˜¯ quote æ•°æ®è€Œé trade æ•°æ®)

### 2. å¼‚å¸¸æ£€æµ‹

- âœ… ä»·é‡å¼‚å¸¸æ£€æµ‹æ­£å¸¸å·¥ä½œ (70 ä¸ªå¼‚å¸¸ç‚¹)
- âœ… æˆäº¤é‡çªå¢æ£€æµ‹æ­£å¸¸å·¥ä½œ (255 ä¸ªå¼‚å¸¸ç‚¹)
- âš ï¸ å¯¹æ•²æ£€æµ‹éœ€è¦é¢å¤–ç‰¹å¾ (gross_volume, net_volume)
- âš ï¸ æç«¯ K çº¿æ£€æµ‹éœ€è¦é¢å¤–ç‰¹å¾ (wick_ratio, body)

### 3. ManipScore åˆ†å¸ƒ

- å¤§éƒ¨åˆ†æ—¶æ®µ (97.37%) çš„æ“çºµåˆ†æ•°è¾ƒä½ (<0.5)
- ä»… 0.20% çš„æ—¶æ®µæœ‰é«˜æ“çºµå«Œç–‘ (>0.7)
- è¿™ç¬¦åˆæ­£å¸¸å¸‚åœºçš„é¢„æœŸ

### 4. ç­–ç•¥è¿‡æ»¤æ•ˆæœ

- è¿‡æ»¤æ‰çš„ä¿¡å·å¾ˆå°‘ (0.13%)
- è¿™æ˜¯å› ä¸ºé«˜æ“çºµåˆ†æ•°æ—¶æ®µæœ¬èº«å°±å¾ˆå°‘
- åœ¨æ“çºµè¡Œä¸ºæ›´é¢‘ç¹çš„å¸‚åœºä¸­ï¼Œè¿‡æ»¤æ•ˆæœä¼šæ›´æ˜æ˜¾

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç¼ºå¤±çš„ç‰¹å¾

å½“å‰æ•°æ®ç¼ºå°‘ä»¥ä¸‹ç‰¹å¾ï¼Œå¯¼è‡´éƒ¨åˆ†æ£€æµ‹å™¨æ— æ³•å®Œå…¨å‘æŒ¥ä½œç”¨ï¼š

- `gross_volume` / `net_volume` - ç”¨äºå¯¹æ•²æ£€æµ‹
- `wick_ratio` / `body` - ç”¨äºæç«¯ K çº¿æ£€æµ‹

**å»ºè®®**: åœ¨ `bar_aggregator.py` ä¸­æ·»åŠ è¿™äº›ç‰¹å¾çš„è®¡ç®—ã€‚

### 2. æˆäº¤é‡æ•°æ®

- æ‰€æœ‰ tick çš„ volume å‡ä¸º 2.0 (bid_size + ask_size = 1.0 + 1.0)
- è¿™å¯èƒ½æ˜¯ quote æ•°æ®è€Œéå®é™…æˆäº¤æ•°æ®
- æˆäº¤é‡ç›¸å…³çš„åˆ†æå¯èƒ½å—é™

### 3. å†…å­˜ä½¿ç”¨

- 1 ä¸ªæœˆæ•°æ®: ~570 MB å†…å­˜
- 1 å¹´æ•°æ®: é¢„è®¡ ~7 GB å†…å­˜
- å»ºè®®åˆ†æ‰¹å¤„ç†æˆ–ä½¿ç”¨æ›´å¤§å†…å­˜çš„æœºå™¨

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

### 1. æ‰©å±•ç‰¹å¾

åœ¨ `src/data_prep/bar_aggregator.py` ä¸­æ·»åŠ ï¼š

```python
# è®¡ç®— gross_volume å’Œ net_volume
df_bars['gross_volume'] = df_bars['volume']  # æ€»æˆäº¤é‡
df_bars['net_volume'] = df_bars['volume'] * np.sign(df_bars['close'] - df_bars['open'])

# è®¡ç®— wick_ratio å’Œ body
df_bars['body'] = abs(df_bars['close'] - df_bars['open'])
df_bars['upper_wick'] = df_bars['high'] - df_bars[['open', 'close']].max(axis=1)
df_bars['lower_wick'] = df_bars[['open', 'close']].min(axis=1) - df_bars['low']
df_bars['wick_ratio'] = (df_bars['upper_wick'] + df_bars['lower_wick']) / (df_bars['body'] + 1e-8)
```

### 2. åˆ†æ‰¹å¤„ç†å¤§æ•°æ®

åˆ›å»ºæŒ‰æœˆæˆ–æŒ‰å­£åº¦å¤„ç†çš„è„šæœ¬ï¼š

```python
# æŒ‰æœˆå¤„ç†
for month in range(1, 13):
    start_date = f'2024-{month:02d}-01'
    end_date = f'2024-{month:02d}-31'
    results = run_full_pipeline(start_date, end_date)
```

### 3. å¯è§†åŒ–åˆ†æ

ä½¿ç”¨ Jupyter Notebook è¿›è¡Œå¯è§†åŒ–ï¼š

```python
import pandas as pd
import matplotlib.pyplot as plt

# åŠ è½½ç»“æœ
df = pd.read_csv('results/bars_with_manipscore_2024-01-01_2024-01-31.csv', index_col=0, parse_dates=True)

# ç»˜åˆ¶ ManipScore æ—¶é—´åºåˆ—
df['manip_score'].plot(figsize=(15, 5))
plt.title('Manipulation Score Over Time')
plt.show()

# ç»˜åˆ¶å¼‚å¸¸åˆ†æ•°åˆ†å¸ƒ
df[['pv_anomaly', 'vol_spike']].hist(bins=50, figsize=(12, 5))
plt.show()
```

### 4. è°ƒæ•´å‚æ•°

æ ¹æ®æ•°æ®ç‰¹ç‚¹è°ƒæ•´é…ç½®å‚æ•°ï¼š

- å¼‚å¸¸æ£€æµ‹é˜ˆå€¼
- ManipScore æƒé‡
- è¿‡æ»¤é˜ˆå€¼
- æ—¶é—´çª—å£

---

## âœ… æ€»ç»“

**æµç¨‹çŠ¶æ€**: âœ… **å®Œå…¨æ­£å¸¸è¿è¡Œ**

**ä¸»è¦æˆæœ**:
1. âœ… æˆåŠŸåŠ è½½å’Œå¤„ç† 300 ä¸‡+ tick æ•°æ®
2. âœ… å¼‚å¸¸æ£€æµ‹ç®—æ³•æ­£å¸¸å·¥ä½œ
3. âœ… ManipScore å› å­æˆåŠŸè®¡ç®—
4. âœ… ç­–ç•¥è¿‡æ»¤æµç¨‹å®Œæ•´
5. âœ… ç»“æœå·²ä¿å­˜ä¸º CSV æ–‡ä»¶

**ä¸‹ä¸€æ­¥**:
1. æ·»åŠ ç¼ºå¤±çš„ç‰¹å¾åˆ—
2. å¤„ç†æ›´é•¿æ—¶é—´æ®µçš„æ•°æ®
3. è¿›è¡Œå¯è§†åŒ–åˆ†æ
4. è°ƒæ•´å‚æ•°ä¼˜åŒ–æ•ˆæœ

---

**è¿è¡Œæ—¶é—´**: 2025-11-14 16:00  
**å¤„ç†æ—¶é•¿**: ~15 ç§’  
**æ•°æ®é‡**: 3,059,497 æ¡ tick â†’ 6,054 æ ¹ K çº¿  
**è¾“å‡ºæ–‡ä»¶**: results/bars_with_manipscore_2024-01-01_2024-01-31.csv (1.37 MB)

